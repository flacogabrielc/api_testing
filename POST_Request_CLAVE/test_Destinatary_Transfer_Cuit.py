import jsonpath
import requests
import json
import pytest

#headersdata = {'Content-Type':'application/json', 'customerExternalId':'f2879dfd-ce0c-ad85-b3b8-7c84b86a0cbd', 'jwt':'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTEyNjMxNjMsImlhdCI6MTY1MTI2MTM2MywiaXNzIjoiY2xhdmUuY29tIiwic3ViIjoiZjI4NzlkZmQtY2UwYy1hZDg1LWIzYjgtN2M4NGI4NmEwY2JkfEFSRyJ9.X-OB9I9jBK0KaF4P29YKuiAAknH5zsT3wZzVcPD--Z6co2MEbBuKeqVqJGyqoWSCXcLX2UYSc6w5d-aA48PhvCz7PauyB78nK1PY11F6tK4gOPJQpcLo5laIpRBSlTVQGX4KsTj_ADg3irkgdLuaUEZTJGggeTJD2BFi5WsK4qj54_n-ALOL8y9P-GrIuolkk1hdP9AU02zEsELzHz9oESNuT9b8pISEJMJpDcrwVtEyQcd0dugvNuuzaMYd7HduscBKtubUIFR9g5e-URHlcJKBxJ16VtBlUZvUhR1WonFljKqh-SJLPDbz8oH6HUmlvlsE2gT8aMdcVgl_bzhStUBrZvOpoQ6Lg6xF5mCOpQ82F86Wx3Wxh1gWvV6ZhUvlHYGuLCKY7H6eBzVzgCgLUeYA03k4at_zSxe6sIRob64q453whZFGL_spehWs786lIT9dG2ZOvFmJRK3xKZS_OACO-SCv9GT7CafJxbVcQEPaaB7zFPsvqVkaosww_JNGuaMKzGKPOQBdgSzkNB_SfiP6jU1_jbsi-LAgGg1wSZeGoC5BABP41zqaHUwE6nF-hsTlVD2L_pFsiRiHFwVfm4SgdKmc_VnXtNXgE5k39tB89oRcsogOMmuiIhfhnsb__RP89M3O7-Oie_VBPWEuDdSzsWF-yeZEZl4behKvOGw' }
headersdata = {'Content-Type':'application/json','customerExternalId':'f2879dfd-ce0c-ad85-b3b8-7c84b86a0cbd', 'jwt':'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTE1Mjc4OTcsImlhdCI6MTY1MTUyNjA5NywiaXNzIjoiY2xhdmUuY29tIiwic3ViIjoiZjI4NzlkZmQtY2UwYy1hZDg1LWIzYjgtN2M4NGI4NmEwY2JkfEFSRyJ9.RA2B6xtfLVg33fcMcdnddf9Oph_6OzfjRrHQ0B75XoZG8A-E-yejTfPCkwuPC5TFPagKGwFWlYYFb9e-dylK6V8o11PfSMZq3Dgg5WuIV13l8YI9oUFnCPBHPUnipz6VujOQB20lw1Huc2UQxrZPA1lV-A64_6iak1Xl_K1VDt5RpwenAgyAGCDi3QBmVbIkgBNeiG_6Tugpkd6pgLLFusWw5pygD-3Y-2plU9aB_Gh7zKrqbhNYIDz3Tbdeqn01tGyoIATn3IgZtf5L7ndbLyqdLqmw7kioE3g_Pe5Ec7dPr_I34V3wcuGv3qksKrDjd8Jn9vK5l3VtF4Ktas-d0vs3CvzEY00y2By_5n_BDFs7JUQoyeGiO_4wAy-W6VNzug7E3zXQ7Ue3sDNr0yev4ef4W1Uw8zytm0kdsaExjGf2FLwouAbn49F5eEnx4hcTK9arREMnBM7hBue35s7C9i0exXAjQeCbROQElx_jiuLH3Y8VMc2Yl9rkpE8G3QAMYq85avr8nMxvimwxqu_i6z1G35eBxXr2K4J1R-e7isEmsJLEv5CSWaOi5f-MwcuJ4kWmAUbplTlcOKhrwYE3Q3PD4SqHo0BCz_A6HC76tlv9ckN_FdLd3jYkutapasjCcT8TdQy-9GN4S3vR7SaNT-48Y1W4mLB7ysxsLERi9ZI'}

data = {
    "owner":"f2879dfd-ce0c-ad85-b3b8-7c84b86a0cbd",
    "accountType":"Caja de ahorro en pesos",
    "accountNumber":"8323/12",
    "cbu":"4021235312992123",
    "alias":"perro.gato.bala",
    "bankName":"Ciudad",
    "remitter":"Abakon S.A",
    "fiscalId":"27238016873",
    "params": {
    }

}

url = "https://asset.qa.clave.cloud/banksbook"

response = requests.post(url, headers=headersdata, json=data)

#200 done #400 ya ingresado
assert response.status_code == 200

print(response.text)
print(response.status_code)

response_json = json.loads(response.text)
# declara la variable account y le asigna el valor que tiene el json en esa variable accountType
account = jsonpath.jsonpath(response_json, 'accountType')
# declara la variable fiscalId y le asigna el valor que tiene el json en esa variable
fiscalId = jsonpath.jsonpath(response_json, 'fiscalId')

# Imprime el tipo de cuenta
print(account[0])
# Imprime el idFiscal
print(fiscalId[0])



#"jwt": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTE1Mjc2NTIsImlhdCI6MTY1MTUyNTg1MiwiaXNzIjoiY2xhdmUuY29tIiwic3ViIjoiZjI4NzlkZmQtY2UwYy1hZDg1LWIzYjgtN2M4NGI4NmEwY2JkfEFSRyJ9.JloctiIVQmr60dXGkpCdaNFaW3T5fFOA8MwPiq-xta1-r62B3_As5n-Ux4QxKg3ficWrLBsr86BCbP2Mb0RSgfPTne7umMn_BKVzsS6_e0sOABy54r6urwaTkiUQE_mnF42GdHyDQVytNqW0h1VdpPrp65gft0bLbodtAnzD0Dz7yahdTczSZt85Pz4d4GR4AQe1hT55PCk3d9bihLscHayZSE1n6mQBbDqO16OaOD2wp9k6Hf0BlAoxy_lTuED8YKFenMyrM3BusRBzsOLGV51oBZ-x17b_1XPHpzi4aLwhmHVkrW1SdpMnQqWeupl4AYwfQpNoH5lm6M0QonN3CFg79B0RoJfFGwdBp3AAn09uXIaFI1PtHN9QGm5adwfWwtNQBW3H89N2r1lscRSxBb8tfktyLmNbbl2VizpeJVIPESt0A5VWUin32--gYo8_FKmilC3wQI_cNcmE2Yw19OleFXbVyIQAYQUnIvweKrfdXJNvjjqifbY2vX_5PakHia1TZaH2mrT8MNsQ7IhB7XUrVniNDCYZXT7FVQRUeju9K1vcWEGZcTnrOBalN28BMdmVmutm2rxwtPflvQRLxJqVq6lxWpkTH2pMzAGz5t0fHoVkBPdOuo6tpGc44yNoiDHiDdHCe85SUx8Ka-lZ-SlK3MwpDdY6ySX4nwvTSB4"
#"jwt": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2NTE1Mjc4OTcsImlhdCI6MTY1MTUyNjA5NywiaXNzIjoiY2xhdmUuY29tIiwic3ViIjoiZjI4NzlkZmQtY2UwYy1hZDg1LWIzYjgtN2M4NGI4NmEwY2JkfEFSRyJ9.RA2B6xtfLVg33fcMcdnddf9Oph_6OzfjRrHQ0B75XoZG8A-E-yejTfPCkwuPC5TFPagKGwFWlYYFb9e-dylK6V8o11PfSMZq3Dgg5WuIV13l8YI9oUFnCPBHPUnipz6VujOQB20lw1Huc2UQxrZPA1lV-A64_6iak1Xl_K1VDt5RpwenAgyAGCDi3QBmVbIkgBNeiG_6Tugpkd6pgLLFusWw5pygD-3Y-2plU9aB_Gh7zKrqbhNYIDz3Tbdeqn01tGyoIATn3IgZtf5L7ndbLyqdLqmw7kioE3g_Pe5Ec7dPr_I34V3wcuGv3qksKrDjd8Jn9vK5l3VtF4Ktas-d0vs3CvzEY00y2By_5n_BDFs7JUQoyeGiO_4wAy-W6VNzug7E3zXQ7Ue3sDNr0yev4ef4W1Uw8zytm0kdsaExjGf2FLwouAbn49F5eEnx4hcTK9arREMnBM7hBue35s7C9i0exXAjQeCbROQElx_jiuLH3Y8VMc2Yl9rkpE8G3QAMYq85avr8nMxvimwxqu_i6z1G35eBxXr2K4J1R-e7isEmsJLEv5CSWaOi5f-MwcuJ4kWmAUbplTlcOKhrwYE3Q3PD4SqHo0BCz_A6HC76tlv9ckN_FdLd3jYkutapasjCcT8TdQy-9GN4S3vR7SaNT-48Y1W4mLB7ysxsLERi9ZI"
